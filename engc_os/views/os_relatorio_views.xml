<odoo>
  <data>
    <!-- explicit list view definition -->

    <record model="ir.ui.view" id="engc_os.os_relatorio_list">
      <field name="name">Relatório de Serviço</field>
      <field name="model">engc.os.relatorios</field>
      <field name="arch" type="xml">
        <tree>

          <field name="name" />
          <field name="data_atendimento" />
          <field name="service_summary" />
          <field name="start_hour" widget="float_time" />
          <field name="final_hour" widget="float_time" />
          <field name="state" widget="badge" />

        </tree>

      </field>
    </record>
    <record model="ir.ui.view" id="engc_os.os_relatorio_form">
      <field name="name">Relatório de serviço</field>
      <field name="model">engc.os.relatorios</field>
      <field name="arch" type="xml">



        <form string="Relatório de serviço" >
          <header>
            <button name="action_add_request_parts" string="Requisitar peças" class="oe_highlight" 
              type="object" />
            <button name="action_application_parts" string="Aplicar peças" class="oe_highlight" 
              type="object" />
            <button name="action_done" string="Concluir" class="oe_highlight" states="draft"
              type="object" />
            <button name="action_cancel" string="Cancelar"  states="done"
              type="object" />
            <field name="state" widget="statusbar" />
          </header>
          <sheet string="Relatório de serviço" >
            <div name="button_box" position="inside">
							<button class="oe_stat_button" string="Peças" type="object"
								name="action_go_request_parts"
								icon="fa-gears">
								<field string="Peças Requisitadas" name="request_parts_count" widget="statinfo" />
							</button>
							<button class="oe_stat_button" string="Serviços" type="object"
								name="action_go_request_parts"
								icon="fa-wrench">
								<field string="Serviços Requisitados" name="request_services_count" widget="statinfo" />
							</button>
						</div>
            <div class="oe_title">
              <h1>
                <field name="name"  />
              </h1>
              <label for="company_id" class="oe_edit_only" />
              <h2>
                <field name="company_id" attrs="{'readonly': [('state','not in',('draft'))] }" options="{'no_create': True, 'no_create_edit':True}" />
              </h2>
            </div>
            <group string="Relatório"  >
              <group >
                <field name="data_atendimento"
                  required="1" attrs="{'readonly': [('state','not in',('draft'))] }"
                />
                <field name="data_fim_atendimento"
                  required="1" attrs="{'readonly': [('state','not in',('draft'))] }"
                />
                <field name="technicians" widget="many2many_tags"  attrs="{'readonly': [('state','not in',('draft'))] }"/>
                <field name="report_type" attrs="{'readonly': [('state','not in',('draft'))] }" />
              </group>
              <group>
                <field name="state_equipment" widget="radio" required="1" attrs="{'readonly': [('state','not in',('draft'))] }" />
                <field name="restriction_type" 
                attrs="{'invisible': [('state_equipment','not in',('restricao'))],'required': [('state_equipment','in',('restricao'))], 'readonly': [('state','not in',('draft'))] }"
                help="Descreva qual restrição o equipamento se encontra"  />
            
              </group>
            </group>

            <notebook>
              <page string="Atendimento">
                <group>
                  <field name="fault_description" attrs="{'readonly': [('state','not in',('draft'))] }" />
                  <field name="service_summary" attrs="{'readonly': [('state','not in',('draft'))] }" />
                  <field name="observations" attrs="{'readonly': [('state','not in',('draft'))] }"/>
                  <field name="pendency" attrs="{'readonly': [('state','not in',('draft'))] }" />
                  <field name="os_id" attrs="{'readonly': [('state','not in',('draft'))] }"/>
                  
                </group>
              </page>
             

              <page string="Fotos">
                <field name="picture_ids" nolabel="1" attrs="{'readonly': [('state','not in',('draft'))] }">
                  <kanban>
                    <templates>
                      <t t-name="kanban-box">
                        <div
                          class="oe_kanban_global_click o_kanban_record_has_image_fill o_hr_kanban_record">
                          <field name="picture" widget="image" class="oe_avatar"
                            options="{'zoom': true}" style="margin-right:50px" />
                          <div class="oe_kanban_details">
                            <div class="o_kanban_record_top">

                              <div class="o_kanban_record_title">


                                <b>
                                  <field name="name" />
                                </b>

                              </div>


                            </div>
                            <div class="o_kanban_record_body">
                              <field name="description" />
                            </div>
                          </div>
                        </div>
                      </t>
                    </templates>
                  </kanban>
                  <form string="Fotos" create="true" delete="true" edit="true">
                    <sheet>
                      <div class="oe_title">
                        <label for="name" class="oe_edit_only" />
                        <h1>
                          <field name="name" placeholder="Título da foto ..." />
                        </h1>
                      </div>
                      <group>
                        <field name="description" />
                      </group>
                      <group>
                        <field name="picture" widget="image"
                          options="{'zoom': True}"
                        />
                      </group>

                    </sheet>
                  </form>

                </field>
              </page>

            </notebook>
          </sheet>
          <div class="oe_chatter">
            <field name="message_follower_ids" widget="mail_followers" />
            <field name="message_ids" widget="mail_thread" />
          </div>
        </form>
      </field>
    </record>


  </data>
</odoo>